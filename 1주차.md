#  자바 소스파일이 실행하는 과정 이해하기
## JVM 이 실행되는 과정이해하기
*JVM 이란? Java Byte Code 를 운영체제에 맞게 해석해주는 역할을 한다.*

*java complier란? .java 파일을 .class 라는 java byte code 로 변환시켜 주는 것*
- - - -

###  JVM 의 특징 
 * OS 가 Byte Code 를 이해할 수 있도록 해석해 주는 역할을 한다.
 * 다른 언어와 큰 차이점은 JVM 위에서 운영체제에 무관하게 실행된다는 장점이 있다.
 * JIT 컴파일러로 속도가 느리다는 단점을 보완하였습니다.
 *JIT 컴파일러란? 실행 시점에서 인터프리트 방식으로 기계어 코드를 생성하면서 그 코드를 캐싱하여, 같은 함수가 여러 번 불릴 때 매번 기계어 코드를 생성하는 것을 방지한다.*

* JVM은  가비지 컬렉션을 수행하여 할당되었다가 더 이상 쓰이지 않는 메모리를 자동으로 회수한다.

![스크린샷 2021-01-01 오전 1 44 30](https://user-images.githubusercontent.com/11612589/103418953-4bb16900-4bd4-11eb-9199-7f4fd7e330a8.png)


### JVM 의 구성
* Class Loader

 컴파일 타임 이 아닌 런타임 시점에 클래스를 로딩하게 해주며 클래스의 인스턴스를 생성하면 클래스 로더를 통해 메모리에 로드하게 됩니다.

> 컴파일타임 vs 런타임  
> 프로그램을 생성하기 위해 개발자는 첫째로 소스코드를 작성하고 컴파일이라는 과정을  통해 기계어코드로 변환 되어 실행 가능한 프로그램이 되며, 이러한 편집 과정을 컴파일타임(Compiletime) 이라고 부른다.  
> 컴파일과정을 마친 프로그램은 사용자에 의해 실행되어 지며, 이러한 응용프로그램이 동작되어지는 때를 런타임(Runtime)이라고 부른다.  


* Runtime Data Areas


  Runtime Data Area 는 JVM이 프로그램 수행하기 위해 OS로 부터 할당받는 메모리 영역이다. 

    - WAS 의 성능에 문제 발생시, 대부분 이 영역의 문제일 가능성이 있다. 메모리누수 및 가비지 컬렉션*
  
    - 운영체제의 고유기능(Native)을 Java로 해결 하는 것이 아닌 운영체제가 구현된 언어 (보통 C, C++)로 운영체제의 고유기능을 만듭니다.
 
	1. PC Register
           -PC Register 는 Thread 가 생성돨 때 마다 생기는 공간으로 Thread가 어떠한 명령을 실행하게 될지에 대한 부분을 기록한다.
           -JVM은 StackBase로 작동하는데 CPU에 직접 instruction을 수행하지 않고, Stack에서 Operand를 뽑아내 이를 별도의 메로리 공간에 저장하는 방식을 취하는데, 이러한 공간을 PC Register 라고 		한다. 
	2. JVM Stack                                                                                                                   
            -지역 변수, 파라미터, 리턴 값, 연산에 사용되는 임시 값등이 생성되는 영역이다.
  	
	3. Native Method Stack
            -자바 외 언어로 작성된 네이티브 코드를 위한 메모리 영역이다.
            -JNI를 통해 표준에 가까운 방식으로 구현이 가능하다.
             
   	4. Heap
             -사용자가 관리하는 인스턴스가 생성되는 공간으로 객체를 동적으로 생성하면 인스턴스가 Heap 영역의 메모리에 할당되어 사용되어진다. 프로그램은 시작될 때 미리 Heap 영역을 많이 할당해 놓으며 
	     인스턴스와 인스턴스 변수가 저장된다. 레퍼런스 변수의 경우 Heap에 인스턴스가 저장 되는것이 아니라 포인터가 저장된다. 
            
	     -메소드 영역에 로드된 클래스만 생성이 가능하고 Garbage Collector가 참조되지 않는 메모리를 확인하고 제거하는 영역이다.            

	5. Method Area
              
             -클래스 멤버 변수의 이름, 데이터 타입, 접근 제어자 정보같은 필드 정보와 메소드의 이름, 리턴 타입, 파라미터, 접근 제어자 정보같은 메소드 정보, 
	       Type정보(Interface인지 class인지),Constant Pool(상수 풀 : 문자 상수, 타입, 필드, 객체 참조가 저장됨), static 변수, final class 변수등이 생성되는 영역이다. 
          
             -new 키워드를 통해 객체가 동적으로 생성되기 이전에는 텍스트 일 뿐이다.
             
             -객체 생성 후에 메소드를 실행하게 되면 해당 클래스 코드에 대한 정보를 Method Area에 저장 하게 된다.
         

	
	
	

* Execution Engine

   class Loader에 의해 JVM으로 Load된 Class 파일(바이트코드)들은 Runtime Data Areas의 Method Area에 배치되는데, JVM은 Method Area의 바이트 코드를 Execution Engine에 제공하여, 
   Class에 정의된 내용대로 바이트 코드를 실행시킨다. 이 때, Load 된 바이트코드를 실행하는 Runtime Module이 Execution Engine(실행 엔진) 이다.
